name: ğŸš€ Deploy to Streamlit Cloud

on:
  push:
    branches: [ main ]
    paths:
      - 'data/strava.duckdb*'
      - 'src/dashboard/**'
      - 'streamlit_app.py'
  workflow_dispatch:

jobs:
  notify-deployment:
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ”„ Checkout
      uses: actions/checkout@v4
    
    - name: ğŸ“Š Check database size
      run: |
        if [ -f "data/strava.duckdb" ]; then
          size=$(du -h data/strava.duckdb | cut -f1)
          echo "ğŸ“Š Taille de la base : $size"
        else
          echo "âŒ Base de donnÃ©es non trouvÃ©e"
        fi
    
    - name: ğŸš€ Deployment notification
      run: |
        echo "ğŸš€ DÃ©ploiement automatique vers Streamlit Cloud..."
        echo "ğŸ“± L'app sera mise Ã  jour dans quelques minutes"
        echo "ğŸ”— URL: https://votre-app.streamlit.app"
